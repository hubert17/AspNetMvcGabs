@model MyAspNetMvcApp.Areas.Account.ViewModels.LoginViewModel

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "Log in";
}

@section Head {
   <style>
       input {
           max-width: 100%;
       }
    </style>
}

<div class="row">
    <div id="loginForm" style="margin-top:50px;" class="mainbox col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2">
        <div class="panel panel-info">
            <div class="panel-heading">
                <div class="panel-title">Sign In</div>
                <div style="float:right; font-size: 80%; position: relative; top:-15px"><a href="#" onClick="$('#loginbox').hide(); $('#forgotbox').show()">Forgot password?</a></div>
            </div>

            <div style="padding-top:30px" class="panel-body">
            @if (ViewData.ModelState[""] != null && ViewData.ModelState[""].Errors.Count > 0)
            {
                <div class="alert alert-danger">
                    <button type="button" class="close" data-dismiss="alert">×</button>
                    @Html.ValidationSummary(true)
                </div>
            }

                <form action="@Url.Action("Login", "Account", new { @ReturnUrl = ViewBag.ReturnUrl })" method="post" class="form-horizontal" role="form">
                    @Html.AntiForgeryToken()
                    <div style="margin-bottom: 25px" class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                        @Html.TextBoxFor(m => m.UserName, new { @class = "form-control", placeholder = "Email", autofocus = "autofocus" })
                    </div>

                    <div style="margin-bottom: 25px" class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                        @Html.PasswordFor(m => m.Password, new { @class = "form-control", placeholder = "Password" })
                        @Html.ValidationMessageFor(m => m.Password)
                    </div>

                    <div class="input-group">
                        <div class="checkbox">
                            <label>
                                @Html.CheckBoxFor(m => m.RememberMe) Remember me
                            </label>
                        </div>
                    </div>

                    <div style="margin-top:10px" class="form-group">
                        <!-- Button -->
                        <div class="col-sm-12 controls">
                            <input type="submit" value="Log in" class="btn btn-primary submit" />
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-md-12 control">
                            <div style="border-top: 1px solid#888; padding-top:15px; font-size:85%">
                                Don't have an account? <a href="@Url.Action("Register", "Account", new { Area = "Account" })">Sign Up Here</a>
                            </div>
                        </div>
                    </div>

                </form>

            </div>
        </div>
    </div>

</div>

@section Scripts {
    @{ Html.RenderPartial("~/Views/Shared/_ValidationScriptsPartial.cshtml"); }
    @{ Html.RenderPartial("~/Views/Shared/_SubmitAnimationScriptPartial.cshtml"); }

<script>
        if (window.top !== window.self) {
            $('.navbar').hide();
            $('.container').hide();

            var loc = window.top.location.href, index = loc.indexOf('#');
            if (index > 0)
                window.top.location.replace('@Url.Action("Login", "Account", new { Area = "Account" })?ReturnUrl=' + loc.substring(0, index));
            else
                window.top.location.replace('@Url.Action("Login", "Account", new { Area = "Account" })');
        }

        $(document).ready(function () {
            //$('#fpModal').modal('show');

            //$("#btn-forgot").click(function () {
            //    $(this).attr('disabled', true);
            //    $(this).html('Requesting...');
            //    var value;
            //    var email = $('#fpemail').val();
            //    $.ajax({
            //        type: "POST",
            //        url: 'http://www.royaltygranitedfw.com/dfwaccount/user/ForgotPassword?email=' + email,
            //        data: "value=" + value,        //POST variable name value
            //        success: function (res) {
            //            if (res == "1") {
            //                $("#btn-forgot").text('Submitted');
            //                alert('Reset password request for ' + email + ' has been sent. Please check your inbox.');
            //            }
            //            else {
            //                alert('Please check your inbox.');
            //            }
            //        }
            //    });
            //});
        });

</script>
}