@model MyAspNetMvcApp.Models.Submission

@{
    ViewBag.Title = "Submit";
}


<div class="col-md-5">
@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <h2>Submit Project</h2>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            @Html.LabelFor(model => model.LastName, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.LastName, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.LastName, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.FirstName, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.FirstName, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.FirstName, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.PartnersName, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.PartnersName, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.PartnersName, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.YearSection, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                <select name="YearSection" id="YearSection" class="form-control">
                    <option></option>
                    <option value="IT3-W1">IT3-W1 TTH</option>
                    <option value="IT3-W2">IT3-W1 MW</option>
                    <option value="IT4-W1">IT4-W2 MW</option>
                    <option value="IT4-W2">IT4-W2 F</option>
                </select>
                @Html.ValidationMessageFor(model => model.YearSection, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Link, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Link, new { htmlAttributes = new { @class = "form-control", placeholder = "http://" } })
                @Html.ValidationMessageFor(model => model.Link, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Notes, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Notes, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.Notes, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.ProjectId, "ProjectId", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.DropDownList("ProjectId", new SelectList(ViewBag.ProjectDropDown as IEnumerable<SelectListItem>, "Value", "Text"), htmlAttributes: new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.ProjectId, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Create" class="btn btn-default" />
            </div>
        </div>
    </div>
}

</div>

<div class="col-md-7">
    <h1>Submissions</h1>
    <table class="table table-condensed">
        <thead>
            <tr>
                <th>Name</th>
                <th>Submit Date</th>
                <th>Project Name</th>
            </tr>
        </thead>
        <tbody>
            @{int i = 0;}
            @foreach(var item in ViewBag.submissions as List<MyAspNetMvcApp.Models.Submission>)
            {
                i++;
                <tr>
                    <td>@i. <a href="@item.Link" target="_blank">@item.LastName, @item.FirstName / @item.PartnersName</a></td>
                    <td>@item.SubmitDate.ToShortDateString()</td>
                    <td>@MyAspNetMvcApp.Models.Project.getProjectName(item.ProjectId)</td>
                </tr>               
            }
        </tbody>
    </table>
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
